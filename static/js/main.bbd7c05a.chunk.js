(this["webpackJsonpJSBudget-firestore"]=this["webpackJsonpJSBudget-firestore"]||[]).push([[0],{32:function(e,t,n){e.exports=n(49)},37:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(27),r=n.n(c),l=(n(37),n(6)),s=n(12),u=n(18),i=n(3),m=n(22),g=n(19),p=n.n(g),d=n(28),f=n(29),b=n.n(f),h=(n(39),b.a.initializeApp({apiKey:"AIzaSyApV3Vm2L7t34M1m1K9e8oV0nfxPxAu7Xk",authDomain:"jsbudget-78b80.firebaseapp.com",databaseURL:"https://jsbudget-78b80.firebaseio.com",projectId:"jsbudget-78b80",storageBucket:"jsbudget-78b80.appspot.com",messagingSenderId:"743916379588",appId:"1:743916379588:web:d9e6dbadeccd362a865891"})),E=h.firestore(),v=(n(43),{signin:function(e,t,n,a){h.auth().signInWithEmailAndPassword(e,t).then(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(window.localStorage.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(m.a)(t),[e.message])}))}))},signout:function(e,t){h.auth().signOut().then((function(e){localStorage.removeItem("token"),t(null)})).catch((function(n){e((function(e){return[].concat(Object(m.a)(e),[n.message])})),localStorage.removeItem("token"),t(null),console.error(n.message)}))}}),j=o.a.createContext(),y=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)([]),s=Object(i.a)(l,2),u=s[0],m=s[1],g=Object(a.useState)(null),p=Object(i.a)(g,2),d=p[0],f=p[1];return o.a.createElement(j.Provider,{value:{handleSignup:function(){v.signup(c.email,c.password,m,f),console.log(u,d)},handleSignin:function(){v.signin(c.email,c.password,m,f),console.log(u,d)},token:d,inputs:c,setInputs:r,errors:u,handleSignout:function(){v.signout(m,f)}}},e.children)},O=function(){console.log("0.1.4");var e=Object(a.useContext)(j),t=e.handleSignin,n=e.inputs,c=e.setInputs,r=e.errors,l=function(e){var t=e.target,a=t.name,o=t.value;console.log(n),c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(s.a)({},a,o))}))};return o.a.createElement("div",{className:"App signin"},o.a.createElement("h1",{className:""},"Sign In"),o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),t()}},o.a.createElement("input",{type:"email",onChange:l,name:"email",placeholder:"email",value:n.email}),o.a.createElement("input",{type:"password",onChange:l,name:"password",placeholder:"password",value:n.password}),o.a.createElement("button",{className:"button green"},"signin"),r.length>0?r.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null),o.a.createElement("h4",null,"version:","0.1.4"))};function w(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),e="".concat(a,"-").concat(n,"-").concat(t),console.log(e),e}var S=function(e){var t=Object(a.useContext)(j).handleSignout,n=Object(a.useState)(!0),c=Object(i.a)(n,2),r=c[0],l=c[1],s=Object(a.useState)({}),u=Object(i.a)(s,2),m=u[0],g=u[1],p=Object(a.useState)(""),d=Object(i.a)(p,2),f=d[0],b=d[1],h=Object(a.useState)(w),v=Object(i.a)(h,2),y=v[0],O=v[1],S=Object(a.useState)(0),C=Object(i.a)(S,2),x=C[0],k=C[1],D=Object(a.useState)("Empty"),I=Object(i.a)(D,2),N=I[0],A=I[1],T=Object(a.useState)([]),B=Object(i.a)(T,2),M=B[0],F=B[1];Object(a.useEffect)((function(){E.collection("category").doc("categorys").get().then((function(e){if(e.exists){var t=e.data();console.log("Cat:",t.catlist),F(t.catlist.sort())}else console.log("No matching documents.")}))}),[]),Object(a.useEffect)((function(){new Date;var e=new Date,t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),1));E.collection("transactions").where("TrxDate",">=",t).orderBy("TrxDate","desc").get().then((function(e){if(e.empty)console.log("No matching documents.");else{var t={"Monthly Total":0};e.forEach((function(e){var n=e.data();t["Monthly Total"]+=n.Amount,n.Category in t||(t[n.Category]=0),t[n.Category]+=Number(n.Amount)})),g(t),console.log("Transactions: ",t)}}))}),[r]);return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h1",{className:"heading"},"Add Transaction"),o.a.createElement("button",{className:"heading red",onClick:t},"sign out ")),o.a.createElement("div",{className:"add-transaction"},o.a.createElement("select",{value:N,onChange:function(e){A(e.target.value)}},o.a.createElement("option",{key:"Empty",value:"Empty"},"Empty"),M.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("input",{type:"date",name:"expenseDate",value:y,required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",autoComplete:"off",onChange:function(e){O(e.target.value)}}),o.a.createElement("input",{type:"number",name:"expenseAmount",value:x,placeholder:"Amount",autoComplete:"off",onChange:function(e){k(e.target.value)}}),o.a.createElement("input",{type:"text",name:"expenseText",value:f,placeholder:"Add Expense Comment...",autoComplete:"off",onChange:function(e){b(e.target.value)}}),o.a.createElement("button",{className:"button green",type:"submit",disabled:!f||!x||!y||"Empty"===N,onClick:function(e){console.log({Comment:f,TrxDate:y,CatId:N,Amount:Number(x)});var t=new Date(Date.UTC(y.slice(0,4),parseInt(y.slice(5,7))-1,parseInt(y.slice(8,10))));E.collection("transactions").add({Comment:f,TrxDate:t,StrDate:y,Category:N,Amount:Number(x),Income:!1,synced:!1}).then((function(e){console.log("Document successfully written with TrxDate! ",e)})).catch((function(e){console.error("Error writing document: ",e)})),k(0),b(""),A("Empty"),l(!r)}},"submit")),o.a.createElement("div",{className:"transactions"},o.a.createElement("h1",null,"Month Totals"),o.a.createElement("ul",{className:"transaction-list"},0===Object.keys(m).length?o.a.createElement("ul",null,"Loading"):Object.keys(m).map((function(e){return o.a.createElement("li",{key:e},o.a.createElement("span",null,e),o.a.createElement("span",null,"$",m[e].toFixed(2)))})))))};var C=function(){var e=Object(a.useContext)(j).token;return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",render:function(t){return null===e?o.a.createElement(O,null):o.a.createElement(S,null)}}),o.a.createElement(l.a,{exact:!0,path:"/signin",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=n(17);r.a.render(o.a.createElement(x.a,null,o.a.createElement(y,null,o.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.bbd7c05a.chunk.js.map