(this.webpackJsonpfirebaseauthtutorial=this.webpackJsonpfirebaseauthtutorial||[]).push([[0],{32:function(e,t,n){e.exports=n(50)},37:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(28),c=n.n(r),u=(n(37),n(6)),l=n(9),s=n(10),i=n(7),m=n.n(i),p=n(12),d=n(5),g=n(18),f=n(29),h=n.n(f),b=(n(39),h.a.initializeApp({apiKey:"AIzaSyApV3Vm2L7t34M1m1K9e8oV0nfxPxAu7Xk",authDomain:"jsbudget-78b80.firebaseapp.com",databaseURL:"https://jsbudget-78b80.firebaseio.com",projectId:"jsbudget-78b80",storageBucket:"jsbudget-78b80.appspot.com",messagingSenderId:"743916379588",appId:"1:743916379588:web:d9e6dbadeccd362a865891"})),v=b.firestore(),j=(n(43),function(e,t,n,a){b.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(n),console.log(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))}),E=function(e,t,n,a){b.auth().signInWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(window.localStorage.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))},O=function(e,t){b.auth().signOut().then((function(e){localStorage.removeItem("token"),t(null)})).catch((function(n){e((function(e){return[].concat(Object(g.a)(e),[n.message])})),localStorage.removeItem("token"),t(null),console.error(n.message)}))},w=o.a.createContext(),x=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(d.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)([]),l=Object(d.a)(u,2),s=l[0],i=l[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),g=p[0],f=p[1];return o.a.createElement(w.Provider,{value:{handleSignup:function(){console.log("handleSignup"),j(r.email,r.password,i,f),console.log(s,g)},handleSignin:function(){console.log("handleSignin!!!!"),E(r.email,r.password,i,f),console.log(s,g)},token:g,inputs:r,setInputs:c,errors:s,handleSignout:function(){O(i,f)}}},e.children)},S=Object(u.f)((function(e){var t=Object(a.useContext)(w),n=t.handleSignup,r=t.inputs,c=t.setInputs,u=t.errors,i=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("handleSubmit"),t.next=4,n();case 4:e.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(e){var t=e.target,n=t.name,a=t.value;console.log(r),c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,a))}))};return o.a.createElement("form",{onSubmit:i},"Signup",o.a.createElement("input",{onChange:d,name:"email",placeholder:"email",value:r.email}),o.a.createElement("input",{onChange:d,name:"password",placeholder:"password",value:r.password}),o.a.createElement("button",null,"signup"),u.length>0?u.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null)})),C=function(){var e=Object(a.useContext)(w),t=e.handleSignin,n=e.inputs,r=e.setInputs,c=e.errors,u=function(e){var t=e.target,a=t.name,o=t.value;console.log(n),r((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},a,o))}))};return o.a.createElement("div",{className:"App container"},o.a.createElement("h1",{className:""},"Signin"),o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),t()}},o.a.createElement("input",{type:"email",onChange:u,name:"email",placeholder:"email",value:n.email}),o.a.createElement("input",{type:"password",onChange:u,name:"password",placeholder:"password",value:n.password}),o.a.createElement("button",null,"signin"),c.length>0?c.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null))};function y(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),e="".concat(a,"-").concat(n,"-").concat(t),console.log(e),e}var k=function(e){var t=Object(a.useContext)(w).handleSignout,n=Object(a.useState)(!0),r=Object(d.a)(n,2),c=(r[0],r[1],Object(a.useState)("")),u=Object(d.a)(c,2),l=u[0],s=u[1],i=Object(a.useState)(y),m=Object(d.a)(i,2),p=m[0],g=m[1],f=Object(a.useState)(0),h=Object(d.a)(f,2),b=h[0],j=h[1],E=Object(a.useState)("Alcohol"),O=Object(d.a)(E,2),x=O[0],S=O[1];return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("button",{onClick:t},"sign out ")),o.a.createElement("div",{className:"transactions"},o.a.createElement("div",{className:"input-group expense"},o.a.createElement("select",{value:x,onChange:function(e){S(e.target.value)}},["Alcohol","Auto Gas","Auto Maint","Camping","Exercise","Grandkids","Grocery","House","Lotto","Misc","Prescription"].map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("input",{type:"date",name:"expenseDate",value:p,required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",autoComplete:"off",onChange:function(e){g(e.target.value)}}),o.a.createElement("input",{type:"number",name:"expenseAmount",value:b,placeholder:"Amount",autoComplete:"off",onChange:function(e){j(e.target.value)}}),o.a.createElement("input",{type:"text",name:"expenseText",value:l,placeholder:"Add Expense Comment...",autoComplete:"off",onChange:function(e){s(e.target.value)}}),o.a.createElement("button",{type:"submit",disabled:!l||!b||!p,onClick:function(e){console.log({Comment:l,TrxDate:p,CatId:x,Amount:Number(b)}),v.collection("transactions").add({Comment:l,TrxDate:new Date(p),Category:x,Amount:Number(b),Income:!1,synced:!1}).then((function(e){console.log("Document successfully written with TrxDate! ",e)})).catch((function(e){console.error("Error writing document: ",e)})),s("")}},"submit")," ")))};n(49);var A=function(){var e=Object(a.useContext)(w).token;return console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/",render:function(t){return null===e?o.a.createElement(C,null):o.a.createElement(k,null)}}),o.a.createElement(u.a,{exact:!0,path:"/signin",component:C}),o.a.createElement(u.a,{exact:!0,path:"/signup",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(16);c.a.render(o.a.createElement(I.a,null,o.a.createElement(x,null,o.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.48cb6bb7.chunk.js.map