(this["webpackJsonpJSBudget-firestore"]=this["webpackJsonpJSBudget-firestore"]||[]).push([[0],{32:function(e,t,n){e.exports=n(49)},37:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(28),r=n.n(c),l=(n(37),n(7)),s=n(10),u=n(6),i=n(8),m=n.n(i),p=n(12),d=n(3),g=n(18),f=n(29),b=n.n(f),h=(n(39),b.a.initializeApp({apiKey:"AIzaSyApV3Vm2L7t34M1m1K9e8oV0nfxPxAu7Xk",authDomain:"jsbudget-78b80.firebaseapp.com",databaseURL:"https://jsbudget-78b80.firebaseio.com",projectId:"jsbudget-78b80",storageBucket:"jsbudget-78b80.appspot.com",messagingSenderId:"743916379588",appId:"1:743916379588:web:d9e6dbadeccd362a865891"})),E=h.firestore(),v=(n(43),function(e,t,n,a){h.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(n),console.log(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))}),j=function(e,t,n,a){h.auth().signInWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(window.localStorage.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))},O=function(e,t){h.auth().signOut().then((function(e){localStorage.removeItem("token"),t(null)})).catch((function(n){e((function(e){return[].concat(Object(g.a)(e),[n.message])})),localStorage.removeItem("token"),t(null),console.error(n.message)}))},w=o.a.createContext(),y=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(d.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)([]),s=Object(d.a)(l,2),u=s[0],i=s[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),g=p[0],f=p[1];return o.a.createElement(w.Provider,{value:{handleSignup:function(){v(c.email,c.password,i,f),console.log(u,g)},handleSignin:function(){j(c.email,c.password,i,f),console.log(u,g)},token:g,inputs:c,setInputs:r,errors:u,handleSignout:function(){O(i,f)}}},e.children)},S=Object(l.f)((function(e){var t=Object(a.useContext)(w),n=t.handleSignup,c=t.inputs,r=t.setInputs,l=t.errors,i=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("handleSubmit"),t.next=4,n();case 4:e.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(e){var t=e.target,n=t.name,a=t.value;console.log(c),r((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(s.a)({},n,a))}))};return o.a.createElement("form",{onSubmit:i},"Signup",o.a.createElement("input",{onChange:d,name:"email",placeholder:"email",value:c.email}),o.a.createElement("input",{onChange:d,name:"password",placeholder:"password",value:c.password}),o.a.createElement("button",null,"signup"),l.length>0?l.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null)})),x=function(){console.log("0.1.3");var e=Object(a.useContext)(w),t=e.handleSignin,n=e.inputs,c=e.setInputs,r=e.errors,l=function(e){var t=e.target,a=t.name,o=t.value;console.log(n),c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(s.a)({},a,o))}))};return o.a.createElement("div",{className:"App signin"},o.a.createElement("h1",{className:""},"Sign In"),o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),t()}},o.a.createElement("input",{type:"email",onChange:l,name:"email",placeholder:"email",value:n.email}),o.a.createElement("input",{type:"password",onChange:l,name:"password",placeholder:"password",value:n.password}),o.a.createElement("button",{className:"button green"},"signin"),r.length>0?r.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null),o.a.createElement("h4",null,"version:","0.1.3"))};function C(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),e="".concat(a,"-").concat(n,"-").concat(t),console.log(e),e}var k=function(e){var t=Object(a.useContext)(w).handleSignout,n=Object(a.useState)(!0),c=Object(d.a)(n,2),r=c[0],l=c[1],s=Object(a.useState)([]),i=Object(d.a)(s,2),m=i[0],p=i[1],g=Object(a.useState)(""),f=Object(d.a)(g,2),b=f[0],h=f[1],v=Object(a.useState)(C),j=Object(d.a)(v,2),O=j[0],y=j[1],S=Object(a.useState)(0),x=Object(d.a)(S,2),k=x[0],D=x[1],I=Object(a.useState)("Empty"),A=Object(d.a)(I,2),N=A[0],T=A[1],B=Object(a.useState)([]),J=Object(d.a)(B,2),L=J[0],P=J[1];Object(a.useEffect)((function(){E.collection("category").doc("categorys").get().then((function(e){if(e.exists){var t=e.data();console.log("Cat:",t.catlist),P(t.catlist)}else console.log("No matching documents.")}))}),[]),Object(a.useEffect)((function(){var e=new Date;E.collection("transactions").where("TrxDate","<=",e).orderBy("TrxDate","desc").limit(5).get().then((function(e){if(e.empty)console.log("No matching documents.");else{var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));p(t),console.log("Transactions: ",t)}}))}),[r]);return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h1",{className:"heading"},"Add Transaction"),o.a.createElement("button",{className:"heading red",onClick:t},"sign out ")),o.a.createElement("div",{className:"add-transaction"},o.a.createElement("select",{value:N,onChange:function(e){T(e.target.value)}},o.a.createElement("option",{key:"Empty",value:"Empty"},"Empty"),L.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("input",{type:"date",name:"expenseDate",value:O,required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",autoComplete:"off",onChange:function(e){y(e.target.value)}}),o.a.createElement("input",{type:"number",name:"expenseAmount",value:k,placeholder:"Amount",autoComplete:"off",onChange:function(e){D(e.target.value)}}),o.a.createElement("input",{type:"text",name:"expenseText",value:b,placeholder:"Add Expense Comment...",autoComplete:"off",onChange:function(e){h(e.target.value)}}),o.a.createElement("button",{className:"button green",type:"submit",disabled:!b||!k||!O||"Empty"===N,onClick:function(e){console.log({Comment:b,TrxDate:O,CatId:N,Amount:Number(k)});var t=new Date(Date.UTC(O.slice(0,4),parseInt(O.slice(5,7))-1,parseInt(O.slice(8,10))));E.collection("transactions").add({Comment:b,TrxDate:t,StrDate:O,Category:N,Amount:Number(k),Income:!1,synced:!1}).then((function(e){console.log("Document successfully written with TrxDate! ",e)})).catch((function(e){console.error("Error writing document: ",e)})),D(0),h(""),T("Empty"),l(!r)}},"submit")),o.a.createElement("div",{className:"transactions"},o.a.createElement("h1",null,"Last 5 Transactions"),o.a.createElement("ul",{className:"transaction-list"},0===m.length?o.a.createElement("ul",null,"Loading"):m.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement("span",null,e.TrxDate.toDate().toUTCString().slice(0,16)),o.a.createElement("span",null,e.Category),o.a.createElement("span",null,e.Amount))})))))};var D=function(){var e=Object(a.useContext)(w).token;return console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",render:function(t){return null===e?o.a.createElement(x,null):o.a.createElement(k,null)}}),o.a.createElement(l.a,{exact:!0,path:"/signin",component:x}),o.a.createElement(l.a,{exact:!0,path:"/signup",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(16);r.a.render(o.a.createElement(I.a,null,o.a.createElement(y,null,o.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.6380aedc.chunk.js.map