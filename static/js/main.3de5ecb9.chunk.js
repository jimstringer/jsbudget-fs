(this["webpackJsonpJSBudget-firestore"]=this["webpackJsonpJSBudget-firestore"]||[]).push([[0],{32:function(e,t,n){e.exports=n(49)},37:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(28),c=n.n(r),l=(n(37),n(7)),u=n(10),s=n(6),i=n(8),m=n.n(i),p=n(12),d=n(4),g=n(18),f=n(29),h=n.n(f),b=(n(39),h.a.initializeApp({apiKey:"AIzaSyApV3Vm2L7t34M1m1K9e8oV0nfxPxAu7Xk",authDomain:"jsbudget-78b80.firebaseapp.com",databaseURL:"https://jsbudget-78b80.firebaseio.com",projectId:"jsbudget-78b80",storageBucket:"jsbudget-78b80.appspot.com",messagingSenderId:"743916379588",appId:"1:743916379588:web:d9e6dbadeccd362a865891"})),v=b.firestore(),E=(n(43),function(e,t,n,a){b.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(n),console.log(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))}),j=function(e,t,n,a){b.auth().signInWithEmailAndPassword(e,t).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.entries(t.user)[5][1].b;case 2:return n=e.sent,e.next=5,localStorage.setItem("token",n);case 5:a(window.localStorage.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((function(t){return[].concat(Object(g.a)(t),[e.message])}))}))},O=function(e,t){b.auth().signOut().then((function(e){localStorage.removeItem("token"),t(null)})).catch((function(n){e((function(e){return[].concat(Object(g.a)(e),[n.message])})),localStorage.removeItem("token"),t(null),console.error(n.message)}))},w=o.a.createContext(),x=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(d.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)([]),u=Object(d.a)(l,2),s=u[0],i=u[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),g=p[0],f=p[1];return o.a.createElement(w.Provider,{value:{handleSignup:function(){E(r.email,r.password,i,f),console.log(s,g)},handleSignin:function(){j(r.email,r.password,i,f),console.log(s,g)},token:g,inputs:r,setInputs:c,errors:s,handleSignout:function(){O(i,f)}}},e.children)},S=Object(l.f)((function(e){var t=Object(a.useContext)(w),n=t.handleSignup,r=t.inputs,c=t.setInputs,l=t.errors,i=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("handleSubmit"),t.next=4,n();case 4:e.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(e){var t=e.target,n=t.name,a=t.value;console.log(r),c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},n,a))}))};return o.a.createElement("form",{onSubmit:i},"Signup",o.a.createElement("input",{onChange:d,name:"email",placeholder:"email",value:r.email}),o.a.createElement("input",{onChange:d,name:"password",placeholder:"password",value:r.password}),o.a.createElement("button",null,"signup"),l.length>0?l.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null)})),C=function(){console.log("0.1.1");var e=Object(a.useContext)(w),t=e.handleSignin,n=e.inputs,r=e.setInputs,c=e.errors,l=function(e){var t=e.target,a=t.name,o=t.value;console.log(n),r((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},a,o))}))};return o.a.createElement("div",{className:"App signin"},o.a.createElement("h1",{className:""},"Sign In"),o.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),t()}},o.a.createElement("input",{type:"email",onChange:l,name:"email",placeholder:"email",value:n.email}),o.a.createElement("input",{type:"password",onChange:l,name:"password",placeholder:"password",value:n.password}),o.a.createElement("button",{className:"button green"},"signin"),c.length>0?c.map((function(e){return o.a.createElement("p",{style:{color:"red"}},e)})):null),o.a.createElement("h4",null,"version:","0.1.1"))};function y(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),e="".concat(a,"-").concat(n,"-").concat(t),console.log(e),e}var k=function(e){var t=Object(a.useContext)(w).handleSignout,n=Object(a.useState)(!0),r=Object(d.a)(n,2),c=r[0],l=r[1],u=Object(a.useState)([]),i=Object(d.a)(u,2),m=i[0],p=i[1],g=Object(a.useState)(""),f=Object(d.a)(g,2),h=f[0],b=f[1],E=Object(a.useState)(y),j=Object(d.a)(E,2),O=j[0],x=j[1],S=Object(a.useState)(0),C=Object(d.a)(S,2),k=C[0],A=C[1],D=Object(a.useState)("Alcohol"),I=Object(d.a)(D,2),N=I[0],T=I[1];Object(a.useEffect)((function(){var e=new Date;v.collection("transactions").where("TrxDate","<=",e).orderBy("TrxDate","desc").limit(5).get().then((function(e){if(e.empty)console.log("No matching documents.");else{var t=e.docs.map((function(e){return Object(s.a)({id:e.id},e.data())}));p(t),console.log("Transactions: ",t)}}))}),[c]);return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h1",{className:"heading"},"Add Transaction"),o.a.createElement("button",{className:"heading red",onClick:t},"sign out ")),o.a.createElement("div",{className:"add-transaction"},o.a.createElement("select",{value:N,onChange:function(e){T(e.target.value)}},["Alcohol","Auto Gas","Auto Maint","Boat","Camping","Clothing","Dine Out","Exercise","Fishing","Grandkids","Grocery","House","Lotto","Misc","Prescription"].map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("input",{type:"date",name:"expenseDate",value:O,required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",autoComplete:"off",onChange:function(e){x(e.target.value)}}),o.a.createElement("input",{type:"number",name:"expenseAmount",value:k,placeholder:"Amount",autoComplete:"off",onChange:function(e){A(e.target.value)}}),o.a.createElement("input",{type:"text",name:"expenseText",value:h,placeholder:"Add Expense Comment...",autoComplete:"off",onChange:function(e){b(e.target.value)}}),o.a.createElement("button",{className:"button green",type:"submit",disabled:!h||!k||!O,onClick:function(e){console.log({Comment:h,TrxDate:O,CatId:N,Amount:Number(k)}),v.collection("transactions").add({Comment:h,TrxDate:new Date(O+"T00:00:00"),Category:N,Amount:Number(k),Income:!1,synced:!1}).then((function(e){console.log("Document successfully written with TrxDate! ",e)})).catch((function(e){console.error("Error writing document: ",e)})),A(0),b(""),l(!c)}},"submit")),o.a.createElement("div",{className:"transactions"},o.a.createElement("h1",null,"Last 5 Transactions"),o.a.createElement("ul",{className:"transaction-list"},0===m.length?o.a.createElement("ul",null,"Loading"):m.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement("span",null,e.TrxDate.toDate().toDateString()),o.a.createElement("span",null,e.Category),o.a.createElement("span",null,e.Amount))})))))};var A=function(){var e=Object(a.useContext)(w).token;return console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",render:function(t){return null===e?o.a.createElement(C,null):o.a.createElement(k,null)}}),o.a.createElement(l.a,{exact:!0,path:"/signin",component:C}),o.a.createElement(l.a,{exact:!0,path:"/signup",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(16);c.a.render(o.a.createElement(D.a,null,o.a.createElement(x,null,o.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.3de5ecb9.chunk.js.map